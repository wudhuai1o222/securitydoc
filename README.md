本github用于把工作中所积累的公共安全技术放到博客上，首先做一个备忘，后续根据每一个点进行展开讨论。

大致我做过的安全的活动有几种。

1.安全开发，开发各类扫描工具，防火墙，模拟攻击脚本，模拟攻击平台，模拟远控，安全业务，代码审计，加解密。

2.渗透测试，sql注入，xss利用，目录遍历，社工，逆向，免杀，逻辑漏洞，ddos。

由于本人的安全开发工作大部分的需求是提供集成安全片平台，远控和防火墙，安全业务防御这三大类，所以在研发过程中会有三个特点。

1.大部分时间是反向开发流程进行设计，例如是通过生产环境发现漏洞，然后反推测试，然后到研发。

2.基本上是成对进行分析，例如研究sql注入和研究如何防御sql注入。

3.研发思路一般分为动态还是静态，基本上每个安全开发防御方案都有通过正则过滤，还是动态分析该请求是否安全两种方式。

基于上面三个特点，首先我的研发大部分是测试驱动开发，基本上知道这个漏洞和渗透的特性，然后分析防御的方式，不断的更新代码和重复的渗透测试让安全防御工作达标。然后在研究渗透技术的时候，最好的研究其技术的原理就是他的整个渗透的操作流，打个比方，sql注入一个url请求到后台到model层的时候他会变成什么sql语句，从试错知道你这里可能存在sql注入漏洞，然后在通过各种注入猜出你的表，你的库，你的数据，整个流程都在你面前展示出来，得出注入成功的原理。知道了这个原理之后，我们就能够想在哪一层做什么防御。所以我的习惯都是成对的研究，注入与防火墙，免杀与杀软，exp与补丁，这样我就能够把安全开发对应其渗透测试的每个技术点原理都能够了解清楚。

接下来就是安全开发语言技能树，基础这个圈子的几个特性，破解开源，入侵溯源，时间差，爆破等，总结出我安全开发接触较多的语言。

1.python

2.js

3.java

4.php

5.c

6.汇编

主流是python与js，这两个语言有着开发速度快，脚本，开源，灵活性强的特性，当出了exp之后，前端用js，后端用python基本是做poc的最佳选择，谁都不想浪费时间在语法和编译上面，在圈子里第一手比第二手的收益大太多了。所以后来很多开源的安全工具都用了python的django框架做后台开发，很多xss平台都是纯js做hook。为什么用js为主呢，因为如果你前端用了过大的框架，本身也是个漏洞池，哪天被爆洞就是黑吃黑，第二用纯js的研发能够不断的维持web渗透的敏感度和挖掘出新的渗透思路，非常熟悉js的各种使用方式对web审计和渗透有很大的帮助。

java和php主要用于几个用于，写大小马，审计的对象，钓鱼，大型的模拟攻击平台。基本上审计入门大多人选择php，因为他高危函数较多，而且内置函数命名非常有规律，作为入门审计是一个好的对象。而java是非常流行的语言，重点还有安卓这块领域，所以做我的工作中对于这两个语言80%是研究对象，20%是研发对象。

c，汇编，这个线路基本是走逆向和远控线路的技能树。就我个人的工作经验，虽然看上去比前4个有更高大上的感觉，但是这两个在我使用过程中更多考验的是你的毅力。前期可能门槛比其他语言高，但是一旦进入了逆向和免杀的学习，基本是一个体力活，就看谁的精力足够。

对于圈子的一些经验，上面6种语言在后期基本都不相上下，区别就看用的人的水平和用的场景，跟语言的好坏没多大关系。

而渗透测试对比安全开发，拼的更多的是你的知识面和你的想象力。说一个抽象但又非常实用的一点就是你的联想能力，如果你是喜欢熟能生巧，把工作做成常态化或者工具化自动化的话，你不太适合做渗透测试，如果想留在这个圈子更建议去作渗透工具开发。因为很多情况下，你可能是掌握了常规的渗透手法的老手，可以找到一些常规的漏洞，但是想对更好的产品做红蓝对抗或者渗透测试，基本上你的成功率可能比新手还低。一个产品可以抽象成是由很多个中间件，框架以及不同的开发人员编写的代码组成的一个现场，渗透的思路相当于你在玩侦探游戏，不断的利用各种细节和各种模拟联想来进行推理。

而支撑你推理的就是你的知识面，我一直觉得渗透测试很像我学五子棋的时候，打比赛的时候就看谁背得开局和棋谱多。基本上我培养渗透人员基本走这样的思路，先老人带新人，把渗透测试的手法学会。到我的时候，就开始讲原理，然后开始背书。你学sql注入我就让你把mysql的函数和语法背下来，你学xss，就把js的函数和语法背下来，你学绕过，就把编码和正则给玩熟，你想提权和绕过命令，就把win和linux的命令背熟。而我主要的渗透工作在审计这块，我可准备了不少审计的字典。所以总结出我的渗透技能树：

1.网络知识

2.sql函数和语法

3.正则和编码

4.系统命令

5.各种软件的基础学习能力。

重点讲一下第五条，在红蓝对抗和渗透过程中，经常会碰到没见过的插件，框架，软件。这时候就是你现学现卖的时候，例如你没有上传的权限，但是你通过日志发现靶机装了一个工具，搜索一看是有ftp功能，这时候你就现学现卖把这个工具利用起来作为你的上传方式。这情景基本上有经验的渗透人员都做过类似的工作。

最后一段备忘一下安全业务的知识点，基本除了攻防之外，还需要很多的安全业务功能去帮忙我们的产品进行主动防御：

1.日志记录。

2.黑名单。

3.用户活动管理。

4.行为分析。

5.加密传输和存储。

6.脱敏处理。

7.密码复杂机制和密码有效周期。

8.权限管理。

9.威胁情报。

如果说安全开发和渗透测试的工作是在攻防进行时的活动的话，这些安全业务的存在一般是在攻防活动前的预警和预防，攻防活动中期和后期的溯源和告警，或许还能成为一个反渗透的机会。

后面会根据自身不断的学习更新以上的技能树，同时对每个技能树进行展开讲解。而我本身并不是类似等保安测人员那样尽量找出很多漏洞的渗透工程师，我更多的是通过一个小缺口或者在无序的信息中，寻到到渗透价值，然后最大限度的通过这个缺口模拟攻击出最大的伤害，然后用这次的红蓝对抗结果进行分析，告诉团队再小的漏洞都能打出很大的伤害。
